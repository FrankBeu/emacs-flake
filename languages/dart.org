* languages-dart
** marker
#+begin_src elisp
  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; languages-dart
  ;;;;
  ;;
#+end_src
** TODO setup - current state: prevent dap-loading-error
** dart
#+begin_src elisp
  (use-package dart-mode
    :hook (
           (dart-mode . flutter-test-mode)
           (dart-mode . company-mode)
           (dart-mode . lsp-deferred)
           (dart-mode . fb*default-company-backends-h)
           )
    )
#+end_src
** flutter
#+begin_src elisp
  (use-package flutter
    :after dart-mode
    :bind (:map dart-mode-map
                ("C-M-x" . #'flutter-run-or-hot-reload))
    ;; :custom
    ;; (flutter-sdk-path "/run/current-system/sw/bin/flutter")
    )
#+end_src
** TODO lsp
https://github.com/emacs-lsp/lsp-dart
https://emacs-lsp.github.io/lsp-dart/#rundebug-tests
#+begin_src elisp
  (use-package lsp-dart
    :after lsp
    :hook (dart-mode . lsp)
    :config
    (when-let (dart-exec (executable-find "dart"))
      (let ((dart-sdk-path (-> dart-exec
                               file-chase-links
                               file-name-directory
                               directory-file-name
                               file-name-directory)))
        (setq lsp-dart-dap-flutter-hot-reload-on-save t)
        (if use-local-dart
            (setq lsp-dart-sdk-dir "/home/frank/flutter/bin/cache/dart-sdk"
                lsp-dart-flutter-sdk-dir "/home/frank/flutter")
          (setq lsp-dart-sdk-dir dart-sdk-path))))
    )
#+end_src
** TODO dap
https://emacs-lsp.github.io/dap-mode/page/configuration/#dart
#+begin_src elisp
  ;; (with-eval-after-load 'lsp-dart
  ;;   (dap-dart-setup))
#+end_src
** hover
run app from desktop without emulator
#+begin_src elisp
  (use-package hover)
#+end_src
)
** dart-server
#+begin_src elisp
  (use-package dart-server
    :config
    (setq
     ;; dart-server-sdk-path "/path/to/flutter/bin/cache/dart-sdk/"
     ;; dart-server-sdk-path "/nix/store/hiiapmm5f9qr8si2k182v5rq3ix2q64i-flutter-stable-1.17.5/bin/flutter/bin/cache/dart-sdk"  ;;;; testHardcode: from nix-shell
          ;; dart-server-enable-analysis-server t
     /run/current-system/sw/bin/dartanalyzer
          ))
#+end_src
** INFO
